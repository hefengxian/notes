(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{405:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),a("p",[s._v("最近买了腾讯云服务器，选择了 Ubuntu 的系统，购买之后先通过控制台连接到服务器修改远程信息")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到 root 用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" -s\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改 root 用户密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" root\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 ssh 配置")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config\n")])])]),a("p",[s._v("修改如下设置")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 端口，改成一个不常用的")]),s._v("\nPort 22xx\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改成 yes")]),s._v("\nPermitRootLogin "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 腾讯云默认把密码登录选项给禁用了，推荐的是部署公钥；这里开启密码登录")]),s._v("\nPasswordAuthentication "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yes")]),s._v("\n")])])]),a("p",[s._v("重启一下 "),a("code",[s._v("systemctl restart sshd.service")]),s._v(" 让修改的设置生效")]),s._v(" "),a("h2",{attrs:{id:"卸载腾讯云监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#卸载腾讯云监控"}},[s._v("#")]),s._v(" 卸载腾讯云监控")]),s._v(" "),a("p",[s._v("通过 "),a("code",[s._v("htop")]),s._v(" 命令发现有大量的奇怪进程，查了一下都是属于腾讯云的监控服务器，一般用来检测 VPS 的各种运行状态，但是一般会占用更多资源 CPU、内存、硬盘空间等，所以选择将其关闭")]),s._v(" "),a("p",[s._v("直接运行命令删除")]),s._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行卸载命令")]),s._v("\n/usr/local/qcloud/stargate/admin/uninstall.sh\n/usr/local/qcloud/YunJing/uninst.sh\n/usr/local/qcloud/monitor/barad/admin/uninstall.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查，为空表示没有相关服务在运行了（这是是大致匹配，如果已经安装了进程里带 agent 的软件，也可能导致有内容）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -A "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" agent\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除相关目录，上面的卸载命令并没有删除文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf /usr/local/qcloud\n")])])]),a("p",[s._v("通过上面的步骤会发现，进程变少了很多（也防止腾讯云偷看你装了什么，比如国内的云服务商就被政府要求不能安装翻墙相关的软件）")])])}),[],!1,null,null,null);t.default=e.exports}}]);