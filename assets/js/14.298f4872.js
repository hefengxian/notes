(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{406:function(s,a,t){"use strict";t.r(a);var e=t(13),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),t("p",[s._v("给公司的服务器新安装的 Ubuntu Server 2004，"),t("code",[s._v("htop")]),s._v(" 发现有一个 "),t("code",[s._v("snapd.service")]),s._v(" 在吃资源（内存、磁盘），所以要移除；之前我的处理办法是直接停用服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl stop snapd.service\n")])])]),t("p",[s._v("但是会提示你这个服务还会启动，如果使用 "),t("code",[s._v("disable")]),s._v(" 重启之后会起另外的服务，更占资源，所以搜索了一下这个 snap 是什么、能不能彻底卸载；其实可以完全卸载的，特么是在服务器版本上这个东西基本上没有用。")]),s._v(" "),t("h2",{attrs:{id:"步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤"}},[s._v("#")]),s._v(" 步骤")]),s._v(" "),t("blockquote",[t("p",[s._v("这里直接复制别人总结好的步骤，因为我自己也在多台服务器设置过了；如果已经有 root 登录则不需要加 sudo 了")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" purge snapd\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# following may not be required as apt purge already removes them")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -vrf ~/snap /snap /var/snap /var/lib/snapd /var/cache/snapd /usr/lib/snapd\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# trying to install some package like chromium-browser will bring back snapd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make sure snapd is not installed as a dependency anymore")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# downside is that some package installation might fail because of dependecy on snapd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-mark hold snapd\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);